"use strict";angular.module("msl.slides",[]),angular.module("msl.slides").factory("mslSlidesLocation",["$location",function(a){return{getSlideNumber:function(){var b=a.search().slide_number;return parseInt(b)},setSlideNumber:function(b){a.search("slide_number",b)}}}]),angular.module("msl.slides").factory("mslSlidesScroller",["$q","$interval","$window",function(a,b,c){return{install:function(a){this.config=a},scroll:function(d,e){var f=a.defer(),g=this.config,h=g.duration,i=g.frames,j=e-d,k=h/i,l=k,m=b(function(){l<h?(c.scroll(0,d+l/h*j),l+=k):(c.scroll(0,e),b.cancel(m),f.resolve())},k);return f.promise}}}]),angular.module("msl.slides").factory("mslSlidesScrollDetector",["$window",function(a){return{keyboardHandlerFactory:function(a){return function(b){var c={40:"down",38:"up"},d=b.keyCode,e=c[d];e&&a.$emit("msl_slides_scroll",e)}},start:function(){angular.element(a).on("keydown",this.keyboardHandler)},stop:function(){angular.element(a).off("keydown",this.keyboardHandler)},install:function(b){this.keyboardHandler=this.keyboardHandlerFactory(b),angular.element(a).on("wheel",function(a){a.preventDefault()}),angular.element(a).on("keydown",function(a){a.preventDefault()}),this.start()}}}]),angular.module("msl.slides").factory("mslSlidesViewport",function(){return{positionOf:function(a){var b=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return b*a}}}),angular.module("msl.slides").factory("mslSlidesConfig",function(){return{duration:500,frames:30}}),angular.module("msl.slides").directive("mslSlides",["mslSlidesLocation","mslSlidesScroller","mslSlidesScrollDetector","mslSlidesViewport","mslSlidesConfig",function(a,b,c,d,e){return{restrict:"E",scope:{},link:function(f,g){f.slides=g.children(),f.slides.css("width","100vw"),f.slides.css("height","100vh"),f.validSlideNumber=function(a){return a>=0&&a<f.slides.length},f.changeSlide=function(e,g){c.stop(),f.$emit("msl_slides_slide_change_start",e,g);var h=d.positionOf(e),i=d.positionOf(g);b.scroll(h,i).then(function(){a.setSlideNumber(g),f.$emit("msl_slides_slide_change_success",e,g),c.start()})},f.$on("$locationChangeSuccess",function(b){var c=a.getSlideNumber();f.validSlideNumber(c)&&(f.slide_number=c)}),f.$on("msl_slides_scroll",function(a,b){var c={up:f.slide_number-1,down:f.slide_number+1},d=c[b];f.validSlideNumber(d)&&f.$apply(function(){f.slide_number=d})}),f.$watch("slide_number",function(a,b){f.slide_number=f.slide_number||0;var a=a||0,b=b||0;a!==b&&f.changeSlide(b,a)}),b.install(e),c.install(f)}}}]);